{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.candleFields = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.zipobject\"));\n\nrequire(\"isomorphic-fetch\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar BASE = 'https://api.binance.com';\nvar FUTURES = 'https://fapi.binance.com';\n\nvar defaultGetTime = function defaultGetTime() {\n  return Date.now();\n};\n\nvar info = {\n  spot: {},\n  futures: {}\n};\n/**\n * Build query string for uri encoded url based on json object\n */\n\nvar makeQueryString = function makeQueryString(q) {\n  return q ? \"?\".concat(Object.keys(q).map(function (k) {\n    return \"\".concat(encodeURIComponent(k), \"=\").concat(encodeURIComponent(q[k]));\n  }).join('&')) : '';\n};\n/**\n * Get API limits info from headers\n */\n\n\nvar headersMapping = {\n  'x-mbx-used-weight-1m': 'usedWeight1m',\n  'x-mbx-order-count-10s': 'orderCount10s',\n  'x-mbx-order-count-1m': 'orderCount1m',\n  'x-mbx-order-count-1h': 'orderCount1h',\n  'x-mbx-order-count-1d': 'orderCount1d',\n  'x-response-time': 'responseTime'\n};\n\nvar responseHandler = function responseHandler(res) {\n  if (!res.headers || !res.url) {\n    return;\n  }\n\n  var marketName = res.url.includes(FUTURES) ? 'futures' : 'spot';\n  Object.keys(headersMapping).forEach(function (key) {\n    var outKey = headersMapping[key];\n\n    if (res.headers.has(key)) {\n      info[marketName][outKey] = res.headers.get(key);\n    }\n  });\n};\n/**\n * Finalize API response\n */\n\n\nvar sendResult = function sendResult(call) {\n  return call.then(function (res) {\n    // Get API limits info from headers\n    responseHandler(res); // If response is ok, we can safely assume it is valid JSON\n\n    if (res.ok) {\n      return res.json();\n    } // Errors might come from the API itself or the proxy Binance is using.\n    // For API errors the response will be valid JSON,but for proxy errors\n    // it will be HTML\n\n\n    return res.text().then(function (text) {\n      var error;\n\n      try {\n        var json = JSON.parse(text); // The body was JSON parseable, assume it is an API response error\n\n        error = new Error(json.msg || \"\".concat(res.status, \" \").concat(res.statusText));\n        error.code = json.code;\n        error.url = res.url;\n      } catch (e) {\n        // The body was not JSON parseable, assume it is proxy error\n        error = new Error(\"\".concat(res.status, \" \").concat(res.statusText, \" \").concat(text));\n        error.response = res;\n        error.responseText = text;\n      }\n\n      throw error;\n    });\n  });\n};\n/**\n * Util to validate existence of required parameter(s)\n */\n\n\nvar checkParams = function checkParams(name, payload) {\n  var requires = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!payload) {\n    throw new Error('You need to pass a payload object.');\n  }\n\n  requires.forEach(function (r) {\n    if (!payload[r] && isNaN(payload[r])) {\n      throw new Error(\"Method \".concat(name, \" requires \").concat(r, \" parameter.\"));\n    }\n  });\n  return true;\n};\n/**\n * Make public calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @param {object} headers\n * @returns {object} The api response\n */\n\n\nvar publicCall = function publicCall(_ref) {\n  var endpoints = _ref.endpoints;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(makeQueryString(data)), {\n      method: method,\n      json: true,\n      headers: headers\n    }));\n  };\n};\n/**\n * Factory method for partial private calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @returns {object} The api response\n */\n\n\nvar keyCall = function keyCall(_ref2) {\n  var apiKey = _ref2.apiKey,\n      pubCall = _ref2.pubCall;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n\n    if (!apiKey) {\n      throw new Error('You need to pass an API key to make this call.');\n    }\n\n    return pubCall(path, data, method, {\n      'X-MBX-APIKEY': apiKey\n    });\n  };\n};\n/**\n * Factory method for private calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @param {object} headers\n * @returns {object} The api response\n */\n\n\nvar privateCall = function privateCall(_ref3) {\n  var apiKey = _ref3.apiKey,\n      apiSecret = _ref3.apiSecret,\n      endpoints = _ref3.endpoints,\n      _ref3$getTime = _ref3.getTime,\n      getTime = _ref3$getTime === void 0 ? defaultGetTime : _ref3$getTime,\n      pubCall = _ref3.pubCall;\n  return function (path) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var noData = arguments.length > 3 ? arguments[3] : undefined;\n    var noExtra = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (!apiKey || !apiSecret) {\n      throw new Error('You need to pass an API key and secret to make authenticated calls.');\n    }\n\n    return (data && data.useServerTime ? pubCall('/api/v3/time').then(function (r) {\n      return r.serverTime;\n    }) : Promise.resolve(getTime())).then(function (timestamp) {\n      if (data) {\n        delete data.useServerTime;\n      }\n\n      var signature = _crypto.default.createHmac('sha256', apiSecret).update(makeQueryString(_objectSpread({}, data, {\n        timestamp: timestamp\n      })).substr(1)).digest('hex');\n\n      var newData = noExtra ? data : _objectSpread({}, data, {\n        timestamp: timestamp,\n        signature: signature\n      });\n      return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(noData ? '' : makeQueryString(newData)), {\n        method: method,\n        headers: {\n          'X-MBX-APIKEY': apiKey\n        },\n        json: true\n      }));\n    });\n  };\n};\n\nvar candleFields = ['openTime', 'open', 'high', 'low', 'close', 'volume', 'closeTime', 'quoteVolume', 'trades', 'baseAssetVolume', 'quoteAssetVolume'];\n/**\n * Get candles for a specific pair and interval and convert response\n * to a user friendly collection.\n */\n\nexports.candleFields = candleFields;\n\nvar _candles = function candles(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/klines';\n  return checkParams('candles', payload, ['symbol']) && pubCall(endpoint, _objectSpread({\n    interval: '5m'\n  }, payload)).then(function (candles) {\n    return candles.map(function (candle) {\n      return (0, _lodash.default)(candleFields, candle);\n    });\n  });\n};\n/**\n * Create a new order wrapper for market order simplicity\n */\n\n\nvar _order = function order(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = ['LIMIT', 'STOP_LOSS_LIMIT', 'TAKE_PROFIT_LIMIT'].includes(payload.type) || !payload.type ? _objectSpread({\n    timeInForce: 'GTC'\n  }, payload) : payload;\n  var requires = ['symbol', 'side'];\n\n  if (!(newPayload.type === 'MARKET' && newPayload.quoteOrderQty) && !(newPayload.type === 'STOP_MARKET') && !(newPayload.type === 'TAKE_PROFIT_MARKET') && !(newPayload.type === 'TRAILING_STOP_MARKET')) {\n    requires.push('quantity');\n  }\n\n  if (newPayload.type === 'TRAILING_STOP_MARKET') {\n    requires.push('callbackRate');\n  }\n\n  return checkParams('order', newPayload, requires) && privCall(url, _objectSpread({\n    type: 'LIMIT'\n  }, newPayload), 'POST');\n};\n\nvar _orderOco = function orderOco(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = payload.stopLimitPrice && !payload.stopLimitTimeInForce ? _objectSpread({\n    stopLimitTimeInForce: 'GTC'\n  }, payload) : payload;\n  return checkParams('order', newPayload, ['symbol', 'side', 'quantity', 'price', 'stopPrice']) && privCall(url, newPayload, 'POST');\n};\n/**\n * Zip asks and bids reponse from order book\n */\n\n\nvar _book = function book(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/depth';\n  return checkParams('book', payload, ['symbol']) && pubCall(endpoint, payload).then(function (_ref4) {\n    var lastUpdateId = _ref4.lastUpdateId,\n        asks = _ref4.asks,\n        bids = _ref4.bids;\n    return {\n      lastUpdateId: lastUpdateId,\n      asks: asks.map(function (a) {\n        return (0, _lodash.default)(['price', 'quantity'], a);\n      }),\n      bids: bids.map(function (b) {\n        return (0, _lodash.default)(['price', 'quantity'], b);\n      })\n    };\n  });\n};\n\nvar _aggTrades = function aggTrades(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/aggTrades';\n  return checkParams('aggTrades', payload, ['symbol']) && pubCall(endpoint, payload).then(function (trades) {\n    return trades.map(function (trade) {\n      return {\n        aggId: trade.a,\n        symbol: payload.symbol,\n        price: trade.p,\n        quantity: trade.q,\n        firstId: trade.f,\n        lastId: trade.l,\n        timestamp: trade.T,\n        isBuyerMaker: trade.m,\n        wasBestPrice: trade.M\n      };\n    });\n  });\n};\n\nvar _default = function _default(opts) {\n  var endpoints = {\n    base: opts && opts.httpBase || BASE,\n    futures: opts && opts.httpFutures || FUTURES\n  };\n  var pubCall = publicCall(_objectSpread({}, opts, {\n    endpoints: endpoints\n  }));\n  var privCall = privateCall(_objectSpread({}, opts, {\n    endpoints: endpoints,\n    pubCall: pubCall\n  }));\n  var kCall = keyCall(_objectSpread({}, opts, {\n    pubCall: pubCall\n  }));\n  return {\n    getInfo: function getInfo() {\n      return info;\n    },\n    ping: function ping() {\n      return pubCall('/api/v3/ping').then(function () {\n        return true;\n      });\n    },\n    time: function time() {\n      return pubCall('/api/v3/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    exchangeInfo: function exchangeInfo(payload) {\n      return pubCall('/api/v3/exchangeInfo', payload);\n    },\n    book: function book(payload) {\n      return _book(pubCall, payload);\n    },\n    aggTrades: function aggTrades(payload) {\n      return _aggTrades(pubCall, payload);\n    },\n    candles: function candles(payload) {\n      return _candles(pubCall, payload);\n    },\n    trades: function trades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/api/v3/trades', payload);\n    },\n    tradesHistory: function tradesHistory(payload) {\n      return checkParams('tradesHitory', payload, ['symbol']) && kCall('/api/v3/historicalTrades', payload);\n    },\n    dailyStats: function dailyStats(payload) {\n      return pubCall('/api/v3/ticker/24hr', payload);\n    },\n    prices: function prices(payload) {\n      return pubCall('/api/v3/ticker/price', payload).then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    avgPrice: function avgPrice(payload) {\n      return pubCall('/api/v3/avgPrice', payload);\n    },\n    allBookTickers: function allBookTickers() {\n      return pubCall('/api/v3/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n\n    /**\n     * Call unmanaged private call to Binance api; you need a key and secret\n     */\n    privateRequest: function privateRequest(method, url, payload) {\n      return privCall(url, payload, method);\n    },\n\n    /**\n     * Call unmanaged public call to Binance api\n     */\n    publicRequest: function publicRequest(method, url, payload) {\n      return pubCall(url, payload, method);\n    },\n    order: function order(payload) {\n      return _order(privCall, payload, '/api/v3/order');\n    },\n    orderOco: function orderOco(payload) {\n      return _orderOco(privCall, payload, '/api/v3/order/oco');\n    },\n    orderTest: function orderTest(payload) {\n      return _order(privCall, payload, '/api/v3/order/test');\n    },\n    getOrder: function getOrder(payload) {\n      return privCall('/api/v3/order', payload);\n    },\n    getOrderOco: function getOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload);\n    },\n    cancelOrder: function cancelOrder(payload) {\n      return privCall('/api/v3/order', payload, 'DELETE');\n    },\n    cancelOrderOco: function cancelOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload, 'DELETE');\n    },\n    cancelOpenOrders: function cancelOpenOrders(payload) {\n      return privCall('/api/v3/openOrders', payload, 'DELETE');\n    },\n    openOrders: function openOrders(payload) {\n      return privCall('/api/v3/openOrders', payload);\n    },\n    allOrders: function allOrders(payload) {\n      return privCall('/api/v3/allOrders', payload);\n    },\n    allOrdersOCO: function allOrdersOCO(payload) {\n      return privCall('/api/v3/allOrderList', payload);\n    },\n    accountInfo: function accountInfo(payload) {\n      return privCall('/api/v3/account', payload);\n    },\n    myTrades: function myTrades(payload) {\n      return privCall('/api/v3/myTrades', payload);\n    },\n    withdraw: function withdraw(payload) {\n      return privCall('/sapi/v1/capital/withdraw/apply', payload, 'POST');\n    },\n    withdrawHistory: function withdrawHistory(payload) {\n      return privCall('/sapi/v1/capital/withdraw/history', payload);\n    },\n    depositHistory: function depositHistory(payload) {\n      return privCall('/sapi/v1/capital/deposit/hisrec', payload);\n    },\n    depositAddress: function depositAddress(payload) {\n      return privCall('/sapi/v1/capital/deposit/address', payload);\n    },\n    tradeFee: function tradeFee(payload) {\n      return privCall('/sapi/v1/asset/tradeFee', payload);\n    },\n    assetDetail: function assetDetail(payload) {\n      return privCall('/sapi/v1/asset/assetDetail', payload);\n    },\n    accountSnapshot: function accountSnapshot(payload) {\n      return privCall('/sapi/v1/accountSnapshot', payload);\n    },\n    universalTransfer: function universalTransfer(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload, 'POST');\n    },\n    universalTransferHistory: function universalTransferHistory(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload);\n    },\n    dustTransfer: function dustTransfer(payload) {\n      return privCall('/sapi/v1/asset/dust', payload, 'POST');\n    },\n    accountCoins: function accountCoins(payload) {\n      return privCall('/sapi/v1/capital/config/getall', payload);\n    },\n    getBnbBurn: function getBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload);\n    },\n    setBnbBurn: function setBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload, 'POST');\n    },\n    capitalConfigs: function capitalConfigs() {\n      return privCall('/sapi/v1/capital/config/getall');\n    },\n    getDataStream: function getDataStream() {\n      return privCall('/api/v3/userDataStream', null, 'POST', true);\n    },\n    keepDataStream: function keepDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'PUT', false, true);\n    },\n    closeDataStream: function closeDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'DELETE', false, true);\n    },\n    marginGetDataStream: function marginGetDataStream() {\n      return privCall('/sapi/v1/userDataStream', null, 'POST', true);\n    },\n    marginKeepDataStream: function marginKeepDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'PUT', false, true);\n    },\n    marginCloseDataStream: function marginCloseDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'DELETE', false, true);\n    },\n    futuresGetDataStream: function futuresGetDataStream() {\n      return privCall('/fapi/v1/listenKey', null, 'POST', true);\n    },\n    futuresKeepDataStream: function futuresKeepDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'PUT', false, true);\n    },\n    futuresCloseDataStream: function futuresCloseDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'DELETE', false, true);\n    },\n    marginAllOrders: function marginAllOrders(payload) {\n      return privCall('/sapi/v1/margin/allOrders', payload);\n    },\n    marginOrder: function marginOrder(payload) {\n      return _order(privCall, payload, '/sapi/v1/margin/order');\n    },\n    marginGetOrder: function marginGetOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload);\n    },\n    marginCancelOrder: function marginCancelOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload, 'DELETE');\n    },\n    marginOpenOrders: function marginOpenOrders(payload) {\n      return privCall('/sapi/v1/margin/openOrders', payload);\n    },\n    marginAccountInfo: function marginAccountInfo(payload) {\n      return privCall('/sapi/v1/margin/account', payload);\n    },\n    marginMyTrades: function marginMyTrades(payload) {\n      return privCall('/sapi/v1/margin/myTrades', payload);\n    },\n    marginRepay: function marginRepay(payload) {\n      return privCall('/sapi/v1/margin/repay', payload, 'POST');\n    },\n    marginLoan: function marginLoan(payload) {\n      return privCall('/sapi/v1/margin/loan', payload, 'POST');\n    },\n    marginIsolatedAccount: function marginIsolatedAccount(payload) {\n      return privCall('/sapi/v1/margin/isolated/account', payload);\n    },\n    marginMaxBorrow: function marginMaxBorrow(payload) {\n      return privCall('/sapi/v1/margin/maxBorrowable', payload);\n    },\n    marginCreateIsolated: function marginCreateIsolated(payload) {\n      return privCall('/sapi/v1/margin/isolated/create', payload, 'POST');\n    },\n    marginIsolatedTransfer: function marginIsolatedTransfer(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload, 'POST');\n    },\n    marginIsolatedTransferHistory: function marginIsolatedTransferHistory(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload);\n    },\n    futuresPing: function futuresPing() {\n      return pubCall('/fapi/v1/ping').then(function () {\n        return true;\n      });\n    },\n    futuresTime: function futuresTime() {\n      return pubCall('/fapi/v1/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    futuresExchangeInfo: function futuresExchangeInfo() {\n      return pubCall('/fapi/v1/exchangeInfo');\n    },\n    futuresBook: function futuresBook(payload) {\n      return _book(pubCall, payload, '/fapi/v1/depth');\n    },\n    futuresAggTrades: function futuresAggTrades(payload) {\n      return _aggTrades(pubCall, payload, '/fapi/v1/aggTrades');\n    },\n    futuresMarkPrice: function futuresMarkPrice(payload) {\n      return pubCall('/fapi/v1/premiumIndex', payload);\n    },\n    futuresAllForceOrders: function futuresAllForceOrders(payload) {\n      return pubCall('/fapi/v1/allForceOrders', payload);\n    },\n    futuresLongShortRatio: function futuresLongShortRatio(payload) {\n      return pubCall('/futures/data/globalLongShortAccountRatio', payload);\n    },\n    futuresCandles: function futuresCandles(payload) {\n      return _candles(pubCall, payload, '/fapi/v1/klines');\n    },\n    futuresTrades: function futuresTrades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/fapi/v1/trades', payload);\n    },\n    futuresDailyStats: function futuresDailyStats(payload) {\n      return pubCall('/fapi/v1/ticker/24hr', payload);\n    },\n    futuresPrices: function futuresPrices() {\n      return pubCall('/fapi/v1/ticker/price').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    futuresAllBookTickers: function futuresAllBookTickers() {\n      return pubCall('/fapi/v1/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n    futuresFundingRate: function futuresFundingRate(payload) {\n      return checkParams('fundingRate', payload, ['symbol']) && pubCall('/fapi/v1/fundingRate', payload);\n    },\n    futuresOrder: function futuresOrder(payload) {\n      return _order(privCall, payload, '/fapi/v1/order');\n    },\n    futuresBatchOrders: function futuresBatchOrders(payload) {\n      return privCall(payload, '/fapi/v1/batchOrders');\n    },\n    futuresGetOrder: function futuresGetOrder(payload) {\n      return privCall('/fapi/v1/order', payload);\n    },\n    futuresCancelOrder: function futuresCancelOrder(payload) {\n      return privCall('/fapi/v1/order', payload, 'DELETE');\n    },\n    futuresCancelAllOpenOrders: function futuresCancelAllOpenOrders(payload) {\n      return privCall('/fapi/v1/allOpenOrders', payload, 'DELETE');\n    },\n    futuresOpenOrders: function futuresOpenOrders(payload) {\n      return privCall('/fapi/v1/openOrders', payload);\n    },\n    futuresAllOrders: function futuresAllOrders(payload) {\n      return privCall('/fapi/v1/allOrders', payload);\n    },\n    futuresPositionRisk: function futuresPositionRisk(payload) {\n      return privCall('/fapi/v2/positionRisk', payload);\n    },\n    futuresLeverageBracket: function futuresLeverageBracket(payload) {\n      return privCall('/fapi/v1/leverageBracket', payload);\n    },\n    futuresAccountBalance: function futuresAccountBalance(payload) {\n      return privCall('/fapi/v2/balance', payload);\n    },\n    futuresAccountInfo: function futuresAccountInfo(payload) {\n      return privCall('/fapi/v2/account', payload);\n    },\n    futuresUserTrades: function futuresUserTrades(payload) {\n      return privCall('/fapi/v1/userTrades', payload);\n    },\n    futuresPositionMode: function futuresPositionMode(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload);\n    },\n    futuresPositionModeChange: function futuresPositionModeChange(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload, 'POST');\n    },\n    futuresLeverage: function futuresLeverage(payload) {\n      return privCall('/fapi/v1/leverage', payload, 'POST');\n    },\n    futuresMarginType: function futuresMarginType(payload) {\n      return privCall('/fapi/v1/marginType', payload, 'POST');\n    },\n    futuresPositionMargin: function futuresPositionMargin(payload) {\n      return privCall('/fapi/v1/positionMargin', payload, 'POST');\n    },\n    futuresMarginHistory: function futuresMarginHistory(payload) {\n      return privCall('/fapi/v1/positionMargin/history', payload);\n    },\n    futuresIncome: function futuresIncome(payload) {\n      return privCall('/fapi/v1/income', payload);\n    }\n  };\n};\n\nexports.default = _default;","map":{"version":3,"sources":["E:/загрузки/форекс/node_modules/binance-api-node/dist/http-client.js"],"names":["Object","defineProperty","exports","value","default","candleFields","_crypto","_interopRequireDefault","require","_lodash","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","BASE","FUTURES","defaultGetTime","Date","now","info","spot","futures","makeQueryString","q","concat","map","k","encodeURIComponent","join","headersMapping","responseHandler","res","headers","url","marketName","includes","outKey","has","get","sendResult","call","then","ok","json","text","error","JSON","parse","Error","msg","status","statusText","code","e","response","responseText","checkParams","name","payload","requires","undefined","r","isNaN","publicCall","_ref","endpoints","path","data","method","fetch","base","keyCall","_ref2","apiKey","pubCall","privateCall","_ref3","apiSecret","_ref3$getTime","getTime","noData","noExtra","useServerTime","serverTime","Promise","resolve","timestamp","signature","createHmac","update","substr","digest","newData","_candles","candles","endpoint","interval","candle","_order","order","privCall","newPayload","type","timeInForce","quoteOrderQty","_orderOco","orderOco","stopLimitPrice","stopLimitTimeInForce","_book","book","_ref4","lastUpdateId","asks","bids","a","b","_aggTrades","aggTrades","trades","trade","aggId","symbol","price","p","quantity","firstId","f","lastId","l","T","isBuyerMaker","m","wasBestPrice","M","_default","opts","httpBase","httpFutures","kCall","getInfo","ping","time","exchangeInfo","tradesHistory","dailyStats","prices","Array","isArray","reduce","out","cur","avgPrice","allBookTickers","privateRequest","publicRequest","orderTest","getOrder","getOrderOco","cancelOrder","cancelOrderOco","cancelOpenOrders","openOrders","allOrders","allOrdersOCO","accountInfo","myTrades","withdraw","withdrawHistory","depositHistory","depositAddress","tradeFee","assetDetail","accountSnapshot","universalTransfer","universalTransferHistory","dustTransfer","accountCoins","getBnbBurn","setBnbBurn","capitalConfigs","getDataStream","keepDataStream","closeDataStream","marginGetDataStream","marginKeepDataStream","marginCloseDataStream","futuresGetDataStream","futuresKeepDataStream","futuresCloseDataStream","marginAllOrders","marginOrder","marginGetOrder","marginCancelOrder","marginOpenOrders","marginAccountInfo","marginMyTrades","marginRepay","marginLoan","marginIsolatedAccount","marginMaxBorrow","marginCreateIsolated","marginIsolatedTransfer","marginIsolatedTransferHistory","futuresPing","futuresTime","futuresExchangeInfo","futuresBook","futuresAggTrades","futuresMarkPrice","futuresAllForceOrders","futuresLongShortRatio","futuresCandles","futuresTrades","futuresDailyStats","futuresPrices","futuresAllBookTickers","futuresFundingRate","futuresOrder","futuresBatchOrders","futuresGetOrder","futuresCancelOrder","futuresCancelAllOpenOrders","futuresOpenOrders","futuresAllOrders","futuresPositionRisk","futuresLeverageBracket","futuresAccountBalance","futuresAccountInfo","futuresUserTrades","futuresPositionMode","futuresPositionModeChange","futuresLeverage","futuresMarginType","futuresPositionMargin","futuresMarginHistory","futuresIncome"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.candleFields = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.zipobject\"));\n\nrequire(\"isomorphic-fetch\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar BASE = 'https://api.binance.com';\nvar FUTURES = 'https://fapi.binance.com';\n\nvar defaultGetTime = function defaultGetTime() {\n  return Date.now();\n};\n\nvar info = {\n  spot: {},\n  futures: {}\n};\n/**\n * Build query string for uri encoded url based on json object\n */\n\nvar makeQueryString = function makeQueryString(q) {\n  return q ? \"?\".concat(Object.keys(q).map(function (k) {\n    return \"\".concat(encodeURIComponent(k), \"=\").concat(encodeURIComponent(q[k]));\n  }).join('&')) : '';\n};\n/**\n * Get API limits info from headers\n */\n\n\nvar headersMapping = {\n  'x-mbx-used-weight-1m': 'usedWeight1m',\n  'x-mbx-order-count-10s': 'orderCount10s',\n  'x-mbx-order-count-1m': 'orderCount1m',\n  'x-mbx-order-count-1h': 'orderCount1h',\n  'x-mbx-order-count-1d': 'orderCount1d',\n  'x-response-time': 'responseTime'\n};\n\nvar responseHandler = function responseHandler(res) {\n  if (!res.headers || !res.url) {\n    return;\n  }\n\n  var marketName = res.url.includes(FUTURES) ? 'futures' : 'spot';\n  Object.keys(headersMapping).forEach(function (key) {\n    var outKey = headersMapping[key];\n\n    if (res.headers.has(key)) {\n      info[marketName][outKey] = res.headers.get(key);\n    }\n  });\n};\n/**\n * Finalize API response\n */\n\n\nvar sendResult = function sendResult(call) {\n  return call.then(function (res) {\n    // Get API limits info from headers\n    responseHandler(res); // If response is ok, we can safely assume it is valid JSON\n\n    if (res.ok) {\n      return res.json();\n    } // Errors might come from the API itself or the proxy Binance is using.\n    // For API errors the response will be valid JSON,but for proxy errors\n    // it will be HTML\n\n\n    return res.text().then(function (text) {\n      var error;\n\n      try {\n        var json = JSON.parse(text); // The body was JSON parseable, assume it is an API response error\n\n        error = new Error(json.msg || \"\".concat(res.status, \" \").concat(res.statusText));\n        error.code = json.code;\n        error.url = res.url;\n      } catch (e) {\n        // The body was not JSON parseable, assume it is proxy error\n        error = new Error(\"\".concat(res.status, \" \").concat(res.statusText, \" \").concat(text));\n        error.response = res;\n        error.responseText = text;\n      }\n\n      throw error;\n    });\n  });\n};\n/**\n * Util to validate existence of required parameter(s)\n */\n\n\nvar checkParams = function checkParams(name, payload) {\n  var requires = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!payload) {\n    throw new Error('You need to pass a payload object.');\n  }\n\n  requires.forEach(function (r) {\n    if (!payload[r] && isNaN(payload[r])) {\n      throw new Error(\"Method \".concat(name, \" requires \").concat(r, \" parameter.\"));\n    }\n  });\n  return true;\n};\n/**\n * Make public calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @param {object} headers\n * @returns {object} The api response\n */\n\n\nvar publicCall = function publicCall(_ref) {\n  var endpoints = _ref.endpoints;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(makeQueryString(data)), {\n      method: method,\n      json: true,\n      headers: headers\n    }));\n  };\n};\n/**\n * Factory method for partial private calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @returns {object} The api response\n */\n\n\nvar keyCall = function keyCall(_ref2) {\n  var apiKey = _ref2.apiKey,\n      pubCall = _ref2.pubCall;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n\n    if (!apiKey) {\n      throw new Error('You need to pass an API key to make this call.');\n    }\n\n    return pubCall(path, data, method, {\n      'X-MBX-APIKEY': apiKey\n    });\n  };\n};\n/**\n * Factory method for private calls against the api\n *\n * @param {string} path Endpoint path\n * @param {object} data The payload to be sent\n * @param {string} method HTTB VERB, GET by default\n * @param {object} headers\n * @returns {object} The api response\n */\n\n\nvar privateCall = function privateCall(_ref3) {\n  var apiKey = _ref3.apiKey,\n      apiSecret = _ref3.apiSecret,\n      endpoints = _ref3.endpoints,\n      _ref3$getTime = _ref3.getTime,\n      getTime = _ref3$getTime === void 0 ? defaultGetTime : _ref3$getTime,\n      pubCall = _ref3.pubCall;\n  return function (path) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var noData = arguments.length > 3 ? arguments[3] : undefined;\n    var noExtra = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (!apiKey || !apiSecret) {\n      throw new Error('You need to pass an API key and secret to make authenticated calls.');\n    }\n\n    return (data && data.useServerTime ? pubCall('/api/v3/time').then(function (r) {\n      return r.serverTime;\n    }) : Promise.resolve(getTime())).then(function (timestamp) {\n      if (data) {\n        delete data.useServerTime;\n      }\n\n      var signature = _crypto.default.createHmac('sha256', apiSecret).update(makeQueryString(_objectSpread({}, data, {\n        timestamp: timestamp\n      })).substr(1)).digest('hex');\n\n      var newData = noExtra ? data : _objectSpread({}, data, {\n        timestamp: timestamp,\n        signature: signature\n      });\n      return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(noData ? '' : makeQueryString(newData)), {\n        method: method,\n        headers: {\n          'X-MBX-APIKEY': apiKey\n        },\n        json: true\n      }));\n    });\n  };\n};\n\nvar candleFields = ['openTime', 'open', 'high', 'low', 'close', 'volume', 'closeTime', 'quoteVolume', 'trades', 'baseAssetVolume', 'quoteAssetVolume'];\n/**\n * Get candles for a specific pair and interval and convert response\n * to a user friendly collection.\n */\n\nexports.candleFields = candleFields;\n\nvar _candles = function candles(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/klines';\n  return checkParams('candles', payload, ['symbol']) && pubCall(endpoint, _objectSpread({\n    interval: '5m'\n  }, payload)).then(function (candles) {\n    return candles.map(function (candle) {\n      return (0, _lodash.default)(candleFields, candle);\n    });\n  });\n};\n/**\n * Create a new order wrapper for market order simplicity\n */\n\n\nvar _order = function order(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = ['LIMIT', 'STOP_LOSS_LIMIT', 'TAKE_PROFIT_LIMIT'].includes(payload.type) || !payload.type ? _objectSpread({\n    timeInForce: 'GTC'\n  }, payload) : payload;\n  var requires = ['symbol', 'side'];\n\n  if (!(newPayload.type === 'MARKET' && newPayload.quoteOrderQty) && !(newPayload.type === 'STOP_MARKET') && !(newPayload.type === 'TAKE_PROFIT_MARKET') && !(newPayload.type === 'TRAILING_STOP_MARKET')) {\n    requires.push('quantity');\n  }\n\n  if (newPayload.type === 'TRAILING_STOP_MARKET') {\n    requires.push('callbackRate');\n  }\n\n  return checkParams('order', newPayload, requires) && privCall(url, _objectSpread({\n    type: 'LIMIT'\n  }, newPayload), 'POST');\n};\n\nvar _orderOco = function orderOco(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = payload.stopLimitPrice && !payload.stopLimitTimeInForce ? _objectSpread({\n    stopLimitTimeInForce: 'GTC'\n  }, payload) : payload;\n  return checkParams('order', newPayload, ['symbol', 'side', 'quantity', 'price', 'stopPrice']) && privCall(url, newPayload, 'POST');\n};\n/**\n * Zip asks and bids reponse from order book\n */\n\n\nvar _book = function book(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/depth';\n  return checkParams('book', payload, ['symbol']) && pubCall(endpoint, payload).then(function (_ref4) {\n    var lastUpdateId = _ref4.lastUpdateId,\n        asks = _ref4.asks,\n        bids = _ref4.bids;\n    return {\n      lastUpdateId: lastUpdateId,\n      asks: asks.map(function (a) {\n        return (0, _lodash.default)(['price', 'quantity'], a);\n      }),\n      bids: bids.map(function (b) {\n        return (0, _lodash.default)(['price', 'quantity'], b);\n      })\n    };\n  });\n};\n\nvar _aggTrades = function aggTrades(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/aggTrades';\n  return checkParams('aggTrades', payload, ['symbol']) && pubCall(endpoint, payload).then(function (trades) {\n    return trades.map(function (trade) {\n      return {\n        aggId: trade.a,\n        symbol: payload.symbol,\n        price: trade.p,\n        quantity: trade.q,\n        firstId: trade.f,\n        lastId: trade.l,\n        timestamp: trade.T,\n        isBuyerMaker: trade.m,\n        wasBestPrice: trade.M\n      };\n    });\n  });\n};\n\nvar _default = function _default(opts) {\n  var endpoints = {\n    base: opts && opts.httpBase || BASE,\n    futures: opts && opts.httpFutures || FUTURES\n  };\n  var pubCall = publicCall(_objectSpread({}, opts, {\n    endpoints: endpoints\n  }));\n  var privCall = privateCall(_objectSpread({}, opts, {\n    endpoints: endpoints,\n    pubCall: pubCall\n  }));\n  var kCall = keyCall(_objectSpread({}, opts, {\n    pubCall: pubCall\n  }));\n  return {\n    getInfo: function getInfo() {\n      return info;\n    },\n    ping: function ping() {\n      return pubCall('/api/v3/ping').then(function () {\n        return true;\n      });\n    },\n    time: function time() {\n      return pubCall('/api/v3/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    exchangeInfo: function exchangeInfo(payload) {\n      return pubCall('/api/v3/exchangeInfo', payload);\n    },\n    book: function book(payload) {\n      return _book(pubCall, payload);\n    },\n    aggTrades: function aggTrades(payload) {\n      return _aggTrades(pubCall, payload);\n    },\n    candles: function candles(payload) {\n      return _candles(pubCall, payload);\n    },\n    trades: function trades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/api/v3/trades', payload);\n    },\n    tradesHistory: function tradesHistory(payload) {\n      return checkParams('tradesHitory', payload, ['symbol']) && kCall('/api/v3/historicalTrades', payload);\n    },\n    dailyStats: function dailyStats(payload) {\n      return pubCall('/api/v3/ticker/24hr', payload);\n    },\n    prices: function prices(payload) {\n      return pubCall('/api/v3/ticker/price', payload).then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    avgPrice: function avgPrice(payload) {\n      return pubCall('/api/v3/avgPrice', payload);\n    },\n    allBookTickers: function allBookTickers() {\n      return pubCall('/api/v3/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n\n    /**\n     * Call unmanaged private call to Binance api; you need a key and secret\n     */\n    privateRequest: function privateRequest(method, url, payload) {\n      return privCall(url, payload, method);\n    },\n\n    /**\n     * Call unmanaged public call to Binance api\n     */\n    publicRequest: function publicRequest(method, url, payload) {\n      return pubCall(url, payload, method);\n    },\n    order: function order(payload) {\n      return _order(privCall, payload, '/api/v3/order');\n    },\n    orderOco: function orderOco(payload) {\n      return _orderOco(privCall, payload, '/api/v3/order/oco');\n    },\n    orderTest: function orderTest(payload) {\n      return _order(privCall, payload, '/api/v3/order/test');\n    },\n    getOrder: function getOrder(payload) {\n      return privCall('/api/v3/order', payload);\n    },\n    getOrderOco: function getOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload);\n    },\n    cancelOrder: function cancelOrder(payload) {\n      return privCall('/api/v3/order', payload, 'DELETE');\n    },\n    cancelOrderOco: function cancelOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload, 'DELETE');\n    },\n    cancelOpenOrders: function cancelOpenOrders(payload) {\n      return privCall('/api/v3/openOrders', payload, 'DELETE');\n    },\n    openOrders: function openOrders(payload) {\n      return privCall('/api/v3/openOrders', payload);\n    },\n    allOrders: function allOrders(payload) {\n      return privCall('/api/v3/allOrders', payload);\n    },\n    allOrdersOCO: function allOrdersOCO(payload) {\n      return privCall('/api/v3/allOrderList', payload);\n    },\n    accountInfo: function accountInfo(payload) {\n      return privCall('/api/v3/account', payload);\n    },\n    myTrades: function myTrades(payload) {\n      return privCall('/api/v3/myTrades', payload);\n    },\n    withdraw: function withdraw(payload) {\n      return privCall('/sapi/v1/capital/withdraw/apply', payload, 'POST');\n    },\n    withdrawHistory: function withdrawHistory(payload) {\n      return privCall('/sapi/v1/capital/withdraw/history', payload);\n    },\n    depositHistory: function depositHistory(payload) {\n      return privCall('/sapi/v1/capital/deposit/hisrec', payload);\n    },\n    depositAddress: function depositAddress(payload) {\n      return privCall('/sapi/v1/capital/deposit/address', payload);\n    },\n    tradeFee: function tradeFee(payload) {\n      return privCall('/sapi/v1/asset/tradeFee', payload);\n    },\n    assetDetail: function assetDetail(payload) {\n      return privCall('/sapi/v1/asset/assetDetail', payload);\n    },\n    accountSnapshot: function accountSnapshot(payload) {\n      return privCall('/sapi/v1/accountSnapshot', payload);\n    },\n    universalTransfer: function universalTransfer(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload, 'POST');\n    },\n    universalTransferHistory: function universalTransferHistory(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload);\n    },\n    dustTransfer: function dustTransfer(payload) {\n      return privCall('/sapi/v1/asset/dust', payload, 'POST');\n    },\n    accountCoins: function accountCoins(payload) {\n      return privCall('/sapi/v1/capital/config/getall', payload);\n    },\n    getBnbBurn: function getBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload);\n    },\n    setBnbBurn: function setBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload, 'POST');\n    },\n    capitalConfigs: function capitalConfigs() {\n      return privCall('/sapi/v1/capital/config/getall');\n    },\n    getDataStream: function getDataStream() {\n      return privCall('/api/v3/userDataStream', null, 'POST', true);\n    },\n    keepDataStream: function keepDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'PUT', false, true);\n    },\n    closeDataStream: function closeDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'DELETE', false, true);\n    },\n    marginGetDataStream: function marginGetDataStream() {\n      return privCall('/sapi/v1/userDataStream', null, 'POST', true);\n    },\n    marginKeepDataStream: function marginKeepDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'PUT', false, true);\n    },\n    marginCloseDataStream: function marginCloseDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'DELETE', false, true);\n    },\n    futuresGetDataStream: function futuresGetDataStream() {\n      return privCall('/fapi/v1/listenKey', null, 'POST', true);\n    },\n    futuresKeepDataStream: function futuresKeepDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'PUT', false, true);\n    },\n    futuresCloseDataStream: function futuresCloseDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'DELETE', false, true);\n    },\n    marginAllOrders: function marginAllOrders(payload) {\n      return privCall('/sapi/v1/margin/allOrders', payload);\n    },\n    marginOrder: function marginOrder(payload) {\n      return _order(privCall, payload, '/sapi/v1/margin/order');\n    },\n    marginGetOrder: function marginGetOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload);\n    },\n    marginCancelOrder: function marginCancelOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload, 'DELETE');\n    },\n    marginOpenOrders: function marginOpenOrders(payload) {\n      return privCall('/sapi/v1/margin/openOrders', payload);\n    },\n    marginAccountInfo: function marginAccountInfo(payload) {\n      return privCall('/sapi/v1/margin/account', payload);\n    },\n    marginMyTrades: function marginMyTrades(payload) {\n      return privCall('/sapi/v1/margin/myTrades', payload);\n    },\n    marginRepay: function marginRepay(payload) {\n      return privCall('/sapi/v1/margin/repay', payload, 'POST');\n    },\n    marginLoan: function marginLoan(payload) {\n      return privCall('/sapi/v1/margin/loan', payload, 'POST');\n    },\n    marginIsolatedAccount: function marginIsolatedAccount(payload) {\n      return privCall('/sapi/v1/margin/isolated/account', payload);\n    },\n    marginMaxBorrow: function marginMaxBorrow(payload) {\n      return privCall('/sapi/v1/margin/maxBorrowable', payload);\n    },\n    marginCreateIsolated: function marginCreateIsolated(payload) {\n      return privCall('/sapi/v1/margin/isolated/create', payload, 'POST');\n    },\n    marginIsolatedTransfer: function marginIsolatedTransfer(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload, 'POST');\n    },\n    marginIsolatedTransferHistory: function marginIsolatedTransferHistory(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload);\n    },\n    futuresPing: function futuresPing() {\n      return pubCall('/fapi/v1/ping').then(function () {\n        return true;\n      });\n    },\n    futuresTime: function futuresTime() {\n      return pubCall('/fapi/v1/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    futuresExchangeInfo: function futuresExchangeInfo() {\n      return pubCall('/fapi/v1/exchangeInfo');\n    },\n    futuresBook: function futuresBook(payload) {\n      return _book(pubCall, payload, '/fapi/v1/depth');\n    },\n    futuresAggTrades: function futuresAggTrades(payload) {\n      return _aggTrades(pubCall, payload, '/fapi/v1/aggTrades');\n    },\n    futuresMarkPrice: function futuresMarkPrice(payload) {\n      return pubCall('/fapi/v1/premiumIndex', payload);\n    },\n    futuresAllForceOrders: function futuresAllForceOrders(payload) {\n      return pubCall('/fapi/v1/allForceOrders', payload);\n    },\n    futuresLongShortRatio: function futuresLongShortRatio(payload) {\n      return pubCall('/futures/data/globalLongShortAccountRatio', payload);\n    },\n    futuresCandles: function futuresCandles(payload) {\n      return _candles(pubCall, payload, '/fapi/v1/klines');\n    },\n    futuresTrades: function futuresTrades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/fapi/v1/trades', payload);\n    },\n    futuresDailyStats: function futuresDailyStats(payload) {\n      return pubCall('/fapi/v1/ticker/24hr', payload);\n    },\n    futuresPrices: function futuresPrices() {\n      return pubCall('/fapi/v1/ticker/price').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    futuresAllBookTickers: function futuresAllBookTickers() {\n      return pubCall('/fapi/v1/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n    futuresFundingRate: function futuresFundingRate(payload) {\n      return checkParams('fundingRate', payload, ['symbol']) && pubCall('/fapi/v1/fundingRate', payload);\n    },\n    futuresOrder: function futuresOrder(payload) {\n      return _order(privCall, payload, '/fapi/v1/order');\n    },\n    futuresBatchOrders: function futuresBatchOrders(payload) {\n      return privCall(payload, '/fapi/v1/batchOrders');\n    },\n    futuresGetOrder: function futuresGetOrder(payload) {\n      return privCall('/fapi/v1/order', payload);\n    },\n    futuresCancelOrder: function futuresCancelOrder(payload) {\n      return privCall('/fapi/v1/order', payload, 'DELETE');\n    },\n    futuresCancelAllOpenOrders: function futuresCancelAllOpenOrders(payload) {\n      return privCall('/fapi/v1/allOpenOrders', payload, 'DELETE');\n    },\n    futuresOpenOrders: function futuresOpenOrders(payload) {\n      return privCall('/fapi/v1/openOrders', payload);\n    },\n    futuresAllOrders: function futuresAllOrders(payload) {\n      return privCall('/fapi/v1/allOrders', payload);\n    },\n    futuresPositionRisk: function futuresPositionRisk(payload) {\n      return privCall('/fapi/v2/positionRisk', payload);\n    },\n    futuresLeverageBracket: function futuresLeverageBracket(payload) {\n      return privCall('/fapi/v1/leverageBracket', payload);\n    },\n    futuresAccountBalance: function futuresAccountBalance(payload) {\n      return privCall('/fapi/v2/balance', payload);\n    },\n    futuresAccountInfo: function futuresAccountInfo(payload) {\n      return privCall('/fapi/v2/account', payload);\n    },\n    futuresUserTrades: function futuresUserTrades(payload) {\n      return privCall('/fapi/v1/userTrades', payload);\n    },\n    futuresPositionMode: function futuresPositionMode(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload);\n    },\n    futuresPositionModeChange: function futuresPositionModeChange(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload, 'POST');\n    },\n    futuresLeverage: function futuresLeverage(payload) {\n      return privCall('/fapi/v1/leverage', payload, 'POST');\n    },\n    futuresMarginType: function futuresMarginType(payload) {\n      return privCall('/fapi/v1/marginType', payload, 'POST');\n    },\n    futuresPositionMargin: function futuresPositionMargin(payload) {\n      return privCall('/fapi/v1/positionMargin', payload, 'POST');\n    },\n    futuresMarginHistory: function futuresMarginHistory(payload) {\n      return privCall('/fapi/v1/positionMargin/history', payload);\n    },\n    futuresIncome: function futuresIncome(payload) {\n      return privCall('/fapi/v1/income', payload);\n    }\n  };\n};\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}