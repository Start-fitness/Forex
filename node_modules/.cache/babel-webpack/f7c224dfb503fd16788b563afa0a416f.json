{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.candleFields = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.zipobject\"));\n\nrequire(\"isomorphic-fetch\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar BASE = 'https://api.binance.com';\nvar FUTURES = 'https://fapi.binance.com';\n\nvar defaultGetTime = function defaultGetTime() {\n  return Date.now();\n};\n\nvar info = {\n  spot: {},\n  futures: {}\n};\n/**\r\n * Build query string for uri encoded url based on json object\r\n */\n\nvar makeQueryString = function makeQueryString(q) {\n  return q ? \"?\".concat(Object.keys(q).map(function (k) {\n    return \"\".concat(encodeURIComponent(k), \"=\").concat(encodeURIComponent(q[k]));\n  }).join('&')) : '';\n};\n/**\r\n * Get API limits info from headers\r\n */\n\n\nvar headersMapping = {\n  'x-mbx-used-weight-1m': 'usedWeight1m',\n  'x-mbx-order-count-10s': 'orderCount10s',\n  'x-mbx-order-count-1m': 'orderCount1m',\n  'x-mbx-order-count-1h': 'orderCount1h',\n  'x-mbx-order-count-1d': 'orderCount1d',\n  'x-response-time': 'responseTime'\n};\n\nvar responseHandler = function responseHandler(res) {\n  if (!res.headers || !res.url) {\n    return;\n  }\n\n  var marketName = res.url.includes(FUTURES) ? 'futures' : 'spot';\n  Object.keys(headersMapping).forEach(function (key) {\n    var outKey = headersMapping[key];\n\n    if (res.headers.has(key)) {\n      info[marketName][outKey] = res.headers.get(key);\n    }\n  });\n};\n/**\r\n * Finalize API response\r\n */\n\n\nvar sendResult = function sendResult(call) {\n  return call.then(function (res) {\n    // Get API limits info from headers\n    responseHandler(res); // If response is ok, we can safely assume it is valid JSON\n\n    if (res.ok) {\n      return res.json();\n    } // Errors might come from the API itself or the proxy Binance is using.\n    // For API errors the response will be valid JSON,but for proxy errors\n    // it will be HTML\n\n\n    return res.text().then(function (text) {\n      var error;\n\n      try {\n        var json = JSON.parse(text); // The body was JSON parseable, assume it is an API response error\n\n        error = new Error(json.msg || \"\".concat(res.status, \" \").concat(res.statusText));\n        error.code = json.code;\n        error.url = res.url;\n      } catch (e) {\n        // The body was not JSON parseable, assume it is proxy error\n        error = new Error(\"\".concat(res.status, \" \").concat(res.statusText, \" \").concat(text));\n        error.response = res;\n        error.responseText = text;\n      }\n\n      throw error;\n    });\n  });\n};\n/**\r\n * Util to validate existence of required parameter(s)\r\n */\n\n\nvar checkParams = function checkParams(name, payload) {\n  var requires = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!payload) {\n    throw new Error('You need to pass a payload object.');\n  }\n\n  requires.forEach(function (r) {\n    if (!payload[r] && isNaN(payload[r])) {\n      throw new Error(\"Method \".concat(name, \" requires \").concat(r, \" parameter.\"));\n    }\n  });\n  return true;\n};\n/**\r\n * Make public calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @param {object} headers\r\n * @returns {object} The api response\r\n */\n\n\nvar publicCall = function publicCall(_ref) {\n  var endpoints = _ref.endpoints;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(makeQueryString(data)), {\n      method: method,\n      json: true,\n      headers: headers\n    }));\n  };\n};\n/**\r\n * Factory method for partial private calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @returns {object} The api response\r\n */\n\n\nvar keyCall = function keyCall(_ref2) {\n  var apiKey = _ref2.apiKey,\n      pubCall = _ref2.pubCall;\n  return function (path, data) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n\n    if (!apiKey) {\n      throw new Error('You need to pass an API key to make this call.');\n    }\n\n    return pubCall(path, data, method, {\n      'X-MBX-APIKEY': apiKey\n    });\n  };\n};\n/**\r\n * Factory method for private calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @param {object} headers\r\n * @returns {object} The api response\r\n */\n\n\nvar privateCall = function privateCall(_ref3) {\n  var apiKey = _ref3.apiKey,\n      apiSecret = _ref3.apiSecret,\n      endpoints = _ref3.endpoints,\n      _ref3$getTime = _ref3.getTime,\n      getTime = _ref3$getTime === void 0 ? defaultGetTime : _ref3$getTime,\n      pubCall = _ref3.pubCall;\n  return function (path) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n    var noData = arguments.length > 3 ? arguments[3] : undefined;\n    var noExtra = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (!apiKey || !apiSecret) {\n      throw new Error('You need to pass an API key and secret to make authenticated calls.');\n    }\n\n    return (data && data.useServerTime ? pubCall('/api/v3/time').then(function (r) {\n      return r.serverTime;\n    }) : Promise.resolve(getTime())).then(function (timestamp) {\n      if (data) {\n        delete data.useServerTime;\n      }\n\n      var signature = _crypto.default.createHmac('sha256', apiSecret).update(makeQueryString(_objectSpread({}, data, {\n        timestamp: timestamp\n      })).substr(1)).digest('hex');\n\n      var newData = noExtra ? data : _objectSpread({}, data, {\n        timestamp: timestamp,\n        signature: signature\n      });\n      return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(noData ? '' : makeQueryString(newData)), {\n        method: method,\n        headers: {\n          'X-MBX-APIKEY': apiKey\n        },\n        json: true\n      }));\n    });\n  };\n};\n\nvar candleFields = ['openTime', 'open', 'high', 'low', 'close', 'volume', 'closeTime', 'quoteVolume', 'trades', 'baseAssetVolume', 'quoteAssetVolume'];\n/**\r\n * Get candles for a specific pair and interval and convert response\r\n * to a user friendly collection.\r\n */\n\nexports.candleFields = candleFields;\n\nvar _candles = function candles(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/klines';\n  return checkParams('candles', payload, ['symbol']) && pubCall(endpoint, _objectSpread({\n    interval: '5m'\n  }, payload)).then(function (candles) {\n    return candles.map(function (candle) {\n      return (0, _lodash.default)(candleFields, candle);\n    });\n  });\n};\n/**\r\n * Create a new order wrapper for market order simplicity\r\n */\n\n\nvar _order = function order(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = ['LIMIT', 'STOP_LOSS_LIMIT', 'TAKE_PROFIT_LIMIT'].includes(payload.type) || !payload.type ? _objectSpread({\n    timeInForce: 'GTC'\n  }, payload) : payload;\n  var requires = ['symbol', 'side'];\n\n  if (!(newPayload.type === 'MARKET' && newPayload.quoteOrderQty) && !(newPayload.type === 'STOP_MARKET') && !(newPayload.type === 'TAKE_PROFIT_MARKET') && !(newPayload.type === 'TRAILING_STOP_MARKET')) {\n    requires.push('quantity');\n  }\n\n  if (newPayload.type === 'TRAILING_STOP_MARKET') {\n    requires.push('callbackRate');\n  }\n\n  return checkParams('order', newPayload, requires) && privCall(url, _objectSpread({\n    type: 'LIMIT'\n  }, newPayload), 'POST');\n};\n\nvar _orderOco = function orderOco(privCall) {\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var url = arguments.length > 2 ? arguments[2] : undefined;\n  var newPayload = payload.stopLimitPrice && !payload.stopLimitTimeInForce ? _objectSpread({\n    stopLimitTimeInForce: 'GTC'\n  }, payload) : payload;\n  return checkParams('order', newPayload, ['symbol', 'side', 'quantity', 'price', 'stopPrice']) && privCall(url, newPayload, 'POST');\n};\n/**\r\n * Zip asks and bids reponse from order book\r\n */\n\n\nvar _book = function book(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/depth';\n  return checkParams('book', payload, ['symbol']) && pubCall(endpoint, payload).then(function (_ref4) {\n    var lastUpdateId = _ref4.lastUpdateId,\n        asks = _ref4.asks,\n        bids = _ref4.bids;\n    return {\n      lastUpdateId: lastUpdateId,\n      asks: asks.map(function (a) {\n        return (0, _lodash.default)(['price', 'quantity'], a);\n      }),\n      bids: bids.map(function (b) {\n        return (0, _lodash.default)(['price', 'quantity'], b);\n      })\n    };\n  });\n};\n\nvar _aggTrades = function aggTrades(pubCall, payload) {\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/aggTrades';\n  return checkParams('aggTrades', payload, ['symbol']) && pubCall(endpoint, payload).then(function (trades) {\n    return trades.map(function (trade) {\n      return {\n        aggId: trade.a,\n        symbol: payload.symbol,\n        price: trade.p,\n        quantity: trade.q,\n        firstId: trade.f,\n        lastId: trade.l,\n        timestamp: trade.T,\n        isBuyerMaker: trade.m,\n        wasBestPrice: trade.M\n      };\n    });\n  });\n};\n\nvar _default = function _default(opts) {\n  var endpoints = {\n    base: opts && opts.httpBase || BASE,\n    futures: opts && opts.httpFutures || FUTURES\n  };\n  var pubCall = publicCall(_objectSpread({}, opts, {\n    endpoints: endpoints\n  }));\n  var privCall = privateCall(_objectSpread({}, opts, {\n    endpoints: endpoints,\n    pubCall: pubCall\n  }));\n  var kCall = keyCall(_objectSpread({}, opts, {\n    pubCall: pubCall\n  }));\n  return {\n    getInfo: function getInfo() {\n      return info;\n    },\n    ping: function ping() {\n      return pubCall('/api/v3/ping').then(function () {\n        return true;\n      });\n    },\n    time: function time() {\n      return pubCall('/api/v3/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    exchangeInfo: function exchangeInfo(payload) {\n      return pubCall('/api/v3/exchangeInfo', payload);\n    },\n    book: function book(payload) {\n      return _book(pubCall, payload);\n    },\n    aggTrades: function aggTrades(payload) {\n      return _aggTrades(pubCall, payload);\n    },\n    candles: function candles(payload) {\n      return _candles(pubCall, payload);\n    },\n    trades: function trades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/api/v3/trades', payload);\n    },\n    tradesHistory: function tradesHistory(payload) {\n      return checkParams('tradesHitory', payload, ['symbol']) && kCall('/api/v3/historicalTrades', payload);\n    },\n    dailyStats: function dailyStats(payload) {\n      return pubCall('/api/v3/ticker/24hr', payload);\n    },\n    prices: function prices(payload) {\n      return pubCall('/api/v3/ticker/price', payload).then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    avgPrice: function avgPrice(payload) {\n      return pubCall('/api/v3/avgPrice', payload);\n    },\n    allBookTickers: function allBookTickers() {\n      return pubCall('/api/v3/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n\n    /**\r\n     * Call unmanaged private call to Binance api; you need a key and secret\r\n     */\n    privateRequest: function privateRequest(method, url, payload) {\n      return privCall(url, payload, method);\n    },\n\n    /**\r\n     * Call unmanaged public call to Binance api\r\n     */\n    publicRequest: function publicRequest(method, url, payload) {\n      return pubCall(url, payload, method);\n    },\n    order: function order(payload) {\n      return _order(privCall, payload, '/api/v3/order');\n    },\n    orderOco: function orderOco(payload) {\n      return _orderOco(privCall, payload, '/api/v3/order/oco');\n    },\n    orderTest: function orderTest(payload) {\n      return _order(privCall, payload, '/api/v3/order/test');\n    },\n    getOrder: function getOrder(payload) {\n      return privCall('/api/v3/order', payload);\n    },\n    getOrderOco: function getOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload);\n    },\n    cancelOrder: function cancelOrder(payload) {\n      return privCall('/api/v3/order', payload, 'DELETE');\n    },\n    cancelOrderOco: function cancelOrderOco(payload) {\n      return privCall('/api/v3/orderList', payload, 'DELETE');\n    },\n    cancelOpenOrders: function cancelOpenOrders(payload) {\n      return privCall('/api/v3/openOrders', payload, 'DELETE');\n    },\n    openOrders: function openOrders(payload) {\n      return privCall('/api/v3/openOrders', payload);\n    },\n    allOrders: function allOrders(payload) {\n      return privCall('/api/v3/allOrders', payload);\n    },\n    allOrdersOCO: function allOrdersOCO(payload) {\n      return privCall('/api/v3/allOrderList', payload);\n    },\n    accountInfo: function accountInfo(payload) {\n      return privCall('/api/v3/account', payload);\n    },\n    myTrades: function myTrades(payload) {\n      return privCall('/api/v3/myTrades', payload);\n    },\n    withdraw: function withdraw(payload) {\n      return privCall('/sapi/v1/capital/withdraw/apply', payload, 'POST');\n    },\n    withdrawHistory: function withdrawHistory(payload) {\n      return privCall('/sapi/v1/capital/withdraw/history', payload);\n    },\n    depositHistory: function depositHistory(payload) {\n      return privCall('/sapi/v1/capital/deposit/hisrec', payload);\n    },\n    depositAddress: function depositAddress(payload) {\n      return privCall('/sapi/v1/capital/deposit/address', payload);\n    },\n    tradeFee: function tradeFee(payload) {\n      return privCall('/sapi/v1/asset/tradeFee', payload);\n    },\n    assetDetail: function assetDetail(payload) {\n      return privCall('/sapi/v1/asset/assetDetail', payload);\n    },\n    accountSnapshot: function accountSnapshot(payload) {\n      return privCall('/sapi/v1/accountSnapshot', payload);\n    },\n    universalTransfer: function universalTransfer(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload, 'POST');\n    },\n    universalTransferHistory: function universalTransferHistory(payload) {\n      return privCall('/sapi/v1/asset/transfer', payload);\n    },\n    dustTransfer: function dustTransfer(payload) {\n      return privCall('/sapi/v1/asset/dust', payload, 'POST');\n    },\n    accountCoins: function accountCoins(payload) {\n      return privCall('/sapi/v1/capital/config/getall', payload);\n    },\n    getBnbBurn: function getBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload);\n    },\n    setBnbBurn: function setBnbBurn(payload) {\n      return privCall('/sapi/v1/bnbBurn', payload, 'POST');\n    },\n    capitalConfigs: function capitalConfigs() {\n      return privCall('/sapi/v1/capital/config/getall');\n    },\n    getDataStream: function getDataStream() {\n      return privCall('/api/v3/userDataStream', null, 'POST', true);\n    },\n    keepDataStream: function keepDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'PUT', false, true);\n    },\n    closeDataStream: function closeDataStream(payload) {\n      return privCall('/api/v3/userDataStream', payload, 'DELETE', false, true);\n    },\n    marginGetDataStream: function marginGetDataStream() {\n      return privCall('/sapi/v1/userDataStream', null, 'POST', true);\n    },\n    marginKeepDataStream: function marginKeepDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'PUT', false, true);\n    },\n    marginCloseDataStream: function marginCloseDataStream(payload) {\n      return privCall('/sapi/v1/userDataStream', payload, 'DELETE', false, true);\n    },\n    futuresGetDataStream: function futuresGetDataStream() {\n      return privCall('/fapi/v1/listenKey', null, 'POST', true);\n    },\n    futuresKeepDataStream: function futuresKeepDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'PUT', false, true);\n    },\n    futuresCloseDataStream: function futuresCloseDataStream(payload) {\n      return privCall('/fapi/v1/listenKey', payload, 'DELETE', false, true);\n    },\n    marginAllOrders: function marginAllOrders(payload) {\n      return privCall('/sapi/v1/margin/allOrders', payload);\n    },\n    marginOrder: function marginOrder(payload) {\n      return _order(privCall, payload, '/sapi/v1/margin/order');\n    },\n    marginGetOrder: function marginGetOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload);\n    },\n    marginCancelOrder: function marginCancelOrder(payload) {\n      return privCall('/sapi/v1/margin/order', payload, 'DELETE');\n    },\n    marginOpenOrders: function marginOpenOrders(payload) {\n      return privCall('/sapi/v1/margin/openOrders', payload);\n    },\n    marginAccountInfo: function marginAccountInfo(payload) {\n      return privCall('/sapi/v1/margin/account', payload);\n    },\n    marginMyTrades: function marginMyTrades(payload) {\n      return privCall('/sapi/v1/margin/myTrades', payload);\n    },\n    marginRepay: function marginRepay(payload) {\n      return privCall('/sapi/v1/margin/repay', payload, 'POST');\n    },\n    marginLoan: function marginLoan(payload) {\n      return privCall('/sapi/v1/margin/loan', payload, 'POST');\n    },\n    marginIsolatedAccount: function marginIsolatedAccount(payload) {\n      return privCall('/sapi/v1/margin/isolated/account', payload);\n    },\n    marginMaxBorrow: function marginMaxBorrow(payload) {\n      return privCall('/sapi/v1/margin/maxBorrowable', payload);\n    },\n    marginCreateIsolated: function marginCreateIsolated(payload) {\n      return privCall('/sapi/v1/margin/isolated/create', payload, 'POST');\n    },\n    marginIsolatedTransfer: function marginIsolatedTransfer(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload, 'POST');\n    },\n    marginIsolatedTransferHistory: function marginIsolatedTransferHistory(payload) {\n      return privCall('/sapi/v1/margin/isolated/transfer', payload);\n    },\n    futuresPing: function futuresPing() {\n      return pubCall('/fapi/v1/ping').then(function () {\n        return true;\n      });\n    },\n    futuresTime: function futuresTime() {\n      return pubCall('/fapi/v1/time').then(function (r) {\n        return r.serverTime;\n      });\n    },\n    futuresExchangeInfo: function futuresExchangeInfo() {\n      return pubCall('/fapi/v1/exchangeInfo');\n    },\n    futuresBook: function futuresBook(payload) {\n      return _book(pubCall, payload, '/fapi/v1/depth');\n    },\n    futuresAggTrades: function futuresAggTrades(payload) {\n      return _aggTrades(pubCall, payload, '/fapi/v1/aggTrades');\n    },\n    futuresMarkPrice: function futuresMarkPrice(payload) {\n      return pubCall('/fapi/v1/premiumIndex', payload);\n    },\n    futuresAllForceOrders: function futuresAllForceOrders(payload) {\n      return pubCall('/fapi/v1/allForceOrders', payload);\n    },\n    futuresLongShortRatio: function futuresLongShortRatio(payload) {\n      return pubCall('/futures/data/globalLongShortAccountRatio', payload);\n    },\n    futuresCandles: function futuresCandles(payload) {\n      return _candles(pubCall, payload, '/fapi/v1/klines');\n    },\n    futuresTrades: function futuresTrades(payload) {\n      return checkParams('trades', payload, ['symbol']) && pubCall('/fapi/v1/trades', payload);\n    },\n    futuresDailyStats: function futuresDailyStats(payload) {\n      return pubCall('/fapi/v1/ticker/24hr', payload);\n    },\n    futuresPrices: function futuresPrices() {\n      return pubCall('/fapi/v1/ticker/price').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur.price, out;\n        }, {});\n      });\n    },\n    futuresAllBookTickers: function futuresAllBookTickers() {\n      return pubCall('/fapi/v1/ticker/bookTicker').then(function (r) {\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\n          return out[cur.symbol] = cur, out;\n        }, {});\n      });\n    },\n    futuresFundingRate: function futuresFundingRate(payload) {\n      return checkParams('fundingRate', payload, ['symbol']) && pubCall('/fapi/v1/fundingRate', payload);\n    },\n    futuresOrder: function futuresOrder(payload) {\n      return _order(privCall, payload, '/fapi/v1/order');\n    },\n    futuresBatchOrders: function futuresBatchOrders(payload) {\n      return privCall(payload, '/fapi/v1/batchOrders');\n    },\n    futuresGetOrder: function futuresGetOrder(payload) {\n      return privCall('/fapi/v1/order', payload);\n    },\n    futuresCancelOrder: function futuresCancelOrder(payload) {\n      return privCall('/fapi/v1/order', payload, 'DELETE');\n    },\n    futuresCancelAllOpenOrders: function futuresCancelAllOpenOrders(payload) {\n      return privCall('/fapi/v1/allOpenOrders', payload, 'DELETE');\n    },\n    futuresOpenOrders: function futuresOpenOrders(payload) {\n      return privCall('/fapi/v1/openOrders', payload);\n    },\n    futuresAllOrders: function futuresAllOrders(payload) {\n      return privCall('/fapi/v1/allOrders', payload);\n    },\n    futuresPositionRisk: function futuresPositionRisk(payload) {\n      return privCall('/fapi/v2/positionRisk', payload);\n    },\n    futuresLeverageBracket: function futuresLeverageBracket(payload) {\n      return privCall('/fapi/v1/leverageBracket', payload);\n    },\n    futuresAccountBalance: function futuresAccountBalance(payload) {\n      return privCall('/fapi/v2/balance', payload);\n    },\n    futuresAccountInfo: function futuresAccountInfo(payload) {\n      return privCall('/fapi/v2/account', payload);\n    },\n    futuresUserTrades: function futuresUserTrades(payload) {\n      return privCall('/fapi/v1/userTrades', payload);\n    },\n    futuresPositionMode: function futuresPositionMode(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload);\n    },\n    futuresPositionModeChange: function futuresPositionModeChange(payload) {\n      return privCall('/fapi/v1/positionSide/dual', payload, 'POST');\n    },\n    futuresLeverage: function futuresLeverage(payload) {\n      return privCall('/fapi/v1/leverage', payload, 'POST');\n    },\n    futuresMarginType: function futuresMarginType(payload) {\n      return privCall('/fapi/v1/marginType', payload, 'POST');\n    },\n    futuresPositionMargin: function futuresPositionMargin(payload) {\n      return privCall('/fapi/v1/positionMargin', payload, 'POST');\n    },\n    futuresMarginHistory: function futuresMarginHistory(payload) {\n      return privCall('/fapi/v1/positionMargin/history', payload);\n    },\n    futuresIncome: function futuresIncome(payload) {\n      return privCall('/fapi/v1/income', payload);\n    }\n  };\n};\n\nexports.default = _default;","map":{"version":3,"sources":["E:/temporary_project/Forex/Forex/node_modules/binance-api-node/dist/http-client.js"],"names":["Object","defineProperty","exports","value","default","candleFields","_lodash","_interopRequireDefault","require","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","BASE","FUTURES","defaultGetTime","Date","now","info","spot","futures","makeQueryString","q","concat","map","k","encodeURIComponent","join","headersMapping","responseHandler","res","headers","url","marketName","includes","outKey","has","get","sendResult","call","then","ok","json","text","error","JSON","parse","Error","msg","status","statusText","code","e","response","responseText","checkParams","name","payload","requires","undefined","r","isNaN","publicCall","_ref","endpoints","path","data","method","fetch","base","keyCall","_ref2","apiKey","pubCall","privateCall","_ref3","apiSecret","_ref3$getTime","getTime","noData","noExtra","useServerTime","serverTime","Promise","resolve","timestamp","signature","_crypto","createHmac","update","substr","digest","newData","_candles","candles","endpoint","interval","candle","_order","order","privCall","newPayload","type","timeInForce","quoteOrderQty","_orderOco","orderOco","stopLimitPrice","stopLimitTimeInForce","_book","book","_ref4","lastUpdateId","asks","bids","a","b","_aggTrades","aggTrades","trades","trade","aggId","symbol","price","p","quantity","firstId","f","lastId","l","T","isBuyerMaker","m","wasBestPrice","M","_default","opts","httpBase","httpFutures","kCall","getInfo","ping","time","exchangeInfo","tradesHistory","dailyStats","prices","Array","isArray","reduce","out","cur","avgPrice","allBookTickers","privateRequest","publicRequest","orderTest","getOrder","getOrderOco","cancelOrder","cancelOrderOco","cancelOpenOrders","openOrders","allOrders","allOrdersOCO","accountInfo","myTrades","withdraw","withdrawHistory","depositHistory","depositAddress","tradeFee","assetDetail","accountSnapshot","universalTransfer","universalTransferHistory","dustTransfer","accountCoins","getBnbBurn","setBnbBurn","capitalConfigs","getDataStream","keepDataStream","closeDataStream","marginGetDataStream","marginKeepDataStream","marginCloseDataStream","futuresGetDataStream","futuresKeepDataStream","futuresCloseDataStream","marginAllOrders","marginOrder","marginGetOrder","marginCancelOrder","marginOpenOrders","marginAccountInfo","marginMyTrades","marginRepay","marginLoan","marginIsolatedAccount","marginMaxBorrow","marginCreateIsolated","marginIsolatedTransfer","marginIsolatedTransferHistory","futuresPing","futuresTime","futuresExchangeInfo","futuresBook","futuresAggTrades","futuresMarkPrice","futuresAllForceOrders","futuresLongShortRatio","futuresCandles","futuresTrades","futuresDailyStats","futuresPrices","futuresAllBookTickers","futuresFundingRate","futuresOrder","futuresBatchOrders","futuresGetOrder","futuresCancelOrder","futuresCancelAllOpenOrders","futuresOpenOrders","futuresAllOrders","futuresPositionRisk","futuresLeverageBracket","futuresAccountBalance","futuresAccountInfo","futuresUserTrades","futuresPositionMode","futuresPositionModeChange","futuresLeverage","futuresMarginType","futuresPositionMargin","futuresMarginHistory","futuresIncome"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.default = exports.candleFields = void 0;\r\n\r\n\r\n\r\nvar _lodash = _interopRequireDefault(require(\"lodash.zipobject\"));\r\n\r\nrequire(\"isomorphic-fetch\");\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nvar BASE = 'https://api.binance.com';\r\nvar FUTURES = 'https://fapi.binance.com';\r\n\r\nvar defaultGetTime = function defaultGetTime() {\r\n  return Date.now();\r\n};\r\n\r\nvar info = {\r\n  spot: {},\r\n  futures: {}\r\n};\r\n/**\r\n * Build query string for uri encoded url based on json object\r\n */\r\n\r\nvar makeQueryString = function makeQueryString(q) {\r\n  return q ? \"?\".concat(Object.keys(q).map(function (k) {\r\n    return \"\".concat(encodeURIComponent(k), \"=\").concat(encodeURIComponent(q[k]));\r\n  }).join('&')) : '';\r\n};\r\n/**\r\n * Get API limits info from headers\r\n */\r\n\r\n\r\nvar headersMapping = {\r\n  'x-mbx-used-weight-1m': 'usedWeight1m',\r\n  'x-mbx-order-count-10s': 'orderCount10s',\r\n  'x-mbx-order-count-1m': 'orderCount1m',\r\n  'x-mbx-order-count-1h': 'orderCount1h',\r\n  'x-mbx-order-count-1d': 'orderCount1d',\r\n  'x-response-time': 'responseTime'\r\n};\r\n\r\nvar responseHandler = function responseHandler(res) {\r\n  if (!res.headers || !res.url) {\r\n    return;\r\n  }\r\n\r\n  var marketName = res.url.includes(FUTURES) ? 'futures' : 'spot';\r\n  Object.keys(headersMapping).forEach(function (key) {\r\n    var outKey = headersMapping[key];\r\n\r\n    if (res.headers.has(key)) {\r\n      info[marketName][outKey] = res.headers.get(key);\r\n    }\r\n  });\r\n};\r\n/**\r\n * Finalize API response\r\n */\r\n\r\n\r\nvar sendResult = function sendResult(call) {\r\n  return call.then(function (res) {\r\n    // Get API limits info from headers\r\n    responseHandler(res); // If response is ok, we can safely assume it is valid JSON\r\n\r\n    if (res.ok) {\r\n      return res.json();\r\n    } // Errors might come from the API itself or the proxy Binance is using.\r\n    // For API errors the response will be valid JSON,but for proxy errors\r\n    // it will be HTML\r\n\r\n\r\n    return res.text().then(function (text) {\r\n      var error;\r\n\r\n      try {\r\n        var json = JSON.parse(text); // The body was JSON parseable, assume it is an API response error\r\n\r\n        error = new Error(json.msg || \"\".concat(res.status, \" \").concat(res.statusText));\r\n        error.code = json.code;\r\n        error.url = res.url;\r\n      } catch (e) {\r\n        // The body was not JSON parseable, assume it is proxy error\r\n        error = new Error(\"\".concat(res.status, \" \").concat(res.statusText, \" \").concat(text));\r\n        error.response = res;\r\n        error.responseText = text;\r\n      }\r\n\r\n      throw error;\r\n    });\r\n  });\r\n};\r\n/**\r\n * Util to validate existence of required parameter(s)\r\n */\r\n\r\n\r\nvar checkParams = function checkParams(name, payload) {\r\n  var requires = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\r\n\r\n  if (!payload) {\r\n    throw new Error('You need to pass a payload object.');\r\n  }\r\n\r\n  requires.forEach(function (r) {\r\n    if (!payload[r] && isNaN(payload[r])) {\r\n      throw new Error(\"Method \".concat(name, \" requires \").concat(r, \" parameter.\"));\r\n    }\r\n  });\r\n  return true;\r\n};\r\n/**\r\n * Make public calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @param {object} headers\r\n * @returns {object} The api response\r\n */\r\n\r\n\r\nvar publicCall = function publicCall(_ref) {\r\n  var endpoints = _ref.endpoints;\r\n  return function (path, data) {\r\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\r\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\r\n    return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(makeQueryString(data)), {\r\n      method: method,\r\n      json: true,\r\n      headers: headers\r\n    }));\r\n  };\r\n};\r\n/**\r\n * Factory method for partial private calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @returns {object} The api response\r\n */\r\n\r\n\r\nvar keyCall = function keyCall(_ref2) {\r\n  var apiKey = _ref2.apiKey,\r\n      pubCall = _ref2.pubCall;\r\n  return function (path, data) {\r\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\r\n\r\n    if (!apiKey) {\r\n      throw new Error('You need to pass an API key to make this call.');\r\n    }\r\n\r\n    return pubCall(path, data, method, {\r\n      'X-MBX-APIKEY': apiKey\r\n    });\r\n  };\r\n};\r\n/**\r\n * Factory method for private calls against the api\r\n *\r\n * @param {string} path Endpoint path\r\n * @param {object} data The payload to be sent\r\n * @param {string} method HTTB VERB, GET by default\r\n * @param {object} headers\r\n * @returns {object} The api response\r\n */\r\n\r\n\r\nvar privateCall = function privateCall(_ref3) {\r\n  var apiKey = _ref3.apiKey,\r\n      apiSecret = _ref3.apiSecret,\r\n      endpoints = _ref3.endpoints,\r\n      _ref3$getTime = _ref3.getTime,\r\n      getTime = _ref3$getTime === void 0 ? defaultGetTime : _ref3$getTime,\r\n      pubCall = _ref3.pubCall;\r\n  return function (path) {\r\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\r\n    var noData = arguments.length > 3 ? arguments[3] : undefined;\r\n    var noExtra = arguments.length > 4 ? arguments[4] : undefined;\r\n\r\n    if (!apiKey || !apiSecret) {\r\n      throw new Error('You need to pass an API key and secret to make authenticated calls.');\r\n    }\r\n\r\n    return (data && data.useServerTime ? pubCall('/api/v3/time').then(function (r) {\r\n      return r.serverTime;\r\n    }) : Promise.resolve(getTime())).then(function (timestamp) {\r\n      if (data) {\r\n        delete data.useServerTime;\r\n      }\r\n\r\n      var signature = _crypto.default.createHmac('sha256', apiSecret).update(makeQueryString(_objectSpread({}, data, {\r\n        timestamp: timestamp\r\n      })).substr(1)).digest('hex');\r\n\r\n      var newData = noExtra ? data : _objectSpread({}, data, {\r\n        timestamp: timestamp,\r\n        signature: signature\r\n      });\r\n      return sendResult(fetch(\"\".concat(!(path.includes('/fapi') || path.includes('/futures')) ? endpoints.base : endpoints.futures).concat(path).concat(noData ? '' : makeQueryString(newData)), {\r\n        method: method,\r\n        headers: {\r\n          'X-MBX-APIKEY': apiKey\r\n        },\r\n        json: true\r\n      }));\r\n    });\r\n  };\r\n};\r\n\r\nvar candleFields = ['openTime', 'open', 'high', 'low', 'close', 'volume', 'closeTime', 'quoteVolume', 'trades', 'baseAssetVolume', 'quoteAssetVolume'];\r\n/**\r\n * Get candles for a specific pair and interval and convert response\r\n * to a user friendly collection.\r\n */\r\n\r\nexports.candleFields = candleFields;\r\n\r\nvar _candles = function candles(pubCall, payload) {\r\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/klines';\r\n  return checkParams('candles', payload, ['symbol']) && pubCall(endpoint, _objectSpread({\r\n    interval: '5m'\r\n  }, payload)).then(function (candles) {\r\n    return candles.map(function (candle) {\r\n      return (0, _lodash.default)(candleFields, candle);\r\n    });\r\n  });\r\n};\r\n/**\r\n * Create a new order wrapper for market order simplicity\r\n */\r\n\r\n\r\nvar _order = function order(privCall) {\r\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var url = arguments.length > 2 ? arguments[2] : undefined;\r\n  var newPayload = ['LIMIT', 'STOP_LOSS_LIMIT', 'TAKE_PROFIT_LIMIT'].includes(payload.type) || !payload.type ? _objectSpread({\r\n    timeInForce: 'GTC'\r\n  }, payload) : payload;\r\n  var requires = ['symbol', 'side'];\r\n\r\n  if (!(newPayload.type === 'MARKET' && newPayload.quoteOrderQty) && !(newPayload.type === 'STOP_MARKET') && !(newPayload.type === 'TAKE_PROFIT_MARKET') && !(newPayload.type === 'TRAILING_STOP_MARKET')) {\r\n    requires.push('quantity');\r\n  }\r\n\r\n  if (newPayload.type === 'TRAILING_STOP_MARKET') {\r\n    requires.push('callbackRate');\r\n  }\r\n\r\n  return checkParams('order', newPayload, requires) && privCall(url, _objectSpread({\r\n    type: 'LIMIT'\r\n  }, newPayload), 'POST');\r\n};\r\n\r\nvar _orderOco = function orderOco(privCall) {\r\n  var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var url = arguments.length > 2 ? arguments[2] : undefined;\r\n  var newPayload = payload.stopLimitPrice && !payload.stopLimitTimeInForce ? _objectSpread({\r\n    stopLimitTimeInForce: 'GTC'\r\n  }, payload) : payload;\r\n  return checkParams('order', newPayload, ['symbol', 'side', 'quantity', 'price', 'stopPrice']) && privCall(url, newPayload, 'POST');\r\n};\r\n/**\r\n * Zip asks and bids reponse from order book\r\n */\r\n\r\n\r\nvar _book = function book(pubCall, payload) {\r\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/depth';\r\n  return checkParams('book', payload, ['symbol']) && pubCall(endpoint, payload).then(function (_ref4) {\r\n    var lastUpdateId = _ref4.lastUpdateId,\r\n        asks = _ref4.asks,\r\n        bids = _ref4.bids;\r\n    return {\r\n      lastUpdateId: lastUpdateId,\r\n      asks: asks.map(function (a) {\r\n        return (0, _lodash.default)(['price', 'quantity'], a);\r\n      }),\r\n      bids: bids.map(function (b) {\r\n        return (0, _lodash.default)(['price', 'quantity'], b);\r\n      })\r\n    };\r\n  });\r\n};\r\n\r\nvar _aggTrades = function aggTrades(pubCall, payload) {\r\n  var endpoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api/v3/aggTrades';\r\n  return checkParams('aggTrades', payload, ['symbol']) && pubCall(endpoint, payload).then(function (trades) {\r\n    return trades.map(function (trade) {\r\n      return {\r\n        aggId: trade.a,\r\n        symbol: payload.symbol,\r\n        price: trade.p,\r\n        quantity: trade.q,\r\n        firstId: trade.f,\r\n        lastId: trade.l,\r\n        timestamp: trade.T,\r\n        isBuyerMaker: trade.m,\r\n        wasBestPrice: trade.M\r\n      };\r\n    });\r\n  });\r\n};\r\n\r\nvar _default = function _default(opts) {\r\n  var endpoints = {\r\n    base: opts && opts.httpBase || BASE,\r\n    futures: opts && opts.httpFutures || FUTURES\r\n  };\r\n  var pubCall = publicCall(_objectSpread({}, opts, {\r\n    endpoints: endpoints\r\n  }));\r\n  var privCall = privateCall(_objectSpread({}, opts, {\r\n    endpoints: endpoints,\r\n    pubCall: pubCall\r\n  }));\r\n  var kCall = keyCall(_objectSpread({}, opts, {\r\n    pubCall: pubCall\r\n  }));\r\n  return {\r\n    getInfo: function getInfo() {\r\n      return info;\r\n    },\r\n    ping: function ping() {\r\n      return pubCall('/api/v3/ping').then(function () {\r\n        return true;\r\n      });\r\n    },\r\n    time: function time() {\r\n      return pubCall('/api/v3/time').then(function (r) {\r\n        return r.serverTime;\r\n      });\r\n    },\r\n    exchangeInfo: function exchangeInfo(payload) {\r\n      return pubCall('/api/v3/exchangeInfo', payload);\r\n    },\r\n    book: function book(payload) {\r\n      return _book(pubCall, payload);\r\n    },\r\n    aggTrades: function aggTrades(payload) {\r\n      return _aggTrades(pubCall, payload);\r\n    },\r\n    candles: function candles(payload) {\r\n      return _candles(pubCall, payload);\r\n    },\r\n    trades: function trades(payload) {\r\n      return checkParams('trades', payload, ['symbol']) && pubCall('/api/v3/trades', payload);\r\n    },\r\n    tradesHistory: function tradesHistory(payload) {\r\n      return checkParams('tradesHitory', payload, ['symbol']) && kCall('/api/v3/historicalTrades', payload);\r\n    },\r\n    dailyStats: function dailyStats(payload) {\r\n      return pubCall('/api/v3/ticker/24hr', payload);\r\n    },\r\n    prices: function prices(payload) {\r\n      return pubCall('/api/v3/ticker/price', payload).then(function (r) {\r\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\r\n          return out[cur.symbol] = cur.price, out;\r\n        }, {});\r\n      });\r\n    },\r\n    avgPrice: function avgPrice(payload) {\r\n      return pubCall('/api/v3/avgPrice', payload);\r\n    },\r\n    allBookTickers: function allBookTickers() {\r\n      return pubCall('/api/v3/ticker/bookTicker').then(function (r) {\r\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\r\n          return out[cur.symbol] = cur, out;\r\n        }, {});\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Call unmanaged private call to Binance api; you need a key and secret\r\n     */\r\n    privateRequest: function privateRequest(method, url, payload) {\r\n      return privCall(url, payload, method);\r\n    },\r\n\r\n    /**\r\n     * Call unmanaged public call to Binance api\r\n     */\r\n    publicRequest: function publicRequest(method, url, payload) {\r\n      return pubCall(url, payload, method);\r\n    },\r\n    order: function order(payload) {\r\n      return _order(privCall, payload, '/api/v3/order');\r\n    },\r\n    orderOco: function orderOco(payload) {\r\n      return _orderOco(privCall, payload, '/api/v3/order/oco');\r\n    },\r\n    orderTest: function orderTest(payload) {\r\n      return _order(privCall, payload, '/api/v3/order/test');\r\n    },\r\n    getOrder: function getOrder(payload) {\r\n      return privCall('/api/v3/order', payload);\r\n    },\r\n    getOrderOco: function getOrderOco(payload) {\r\n      return privCall('/api/v3/orderList', payload);\r\n    },\r\n    cancelOrder: function cancelOrder(payload) {\r\n      return privCall('/api/v3/order', payload, 'DELETE');\r\n    },\r\n    cancelOrderOco: function cancelOrderOco(payload) {\r\n      return privCall('/api/v3/orderList', payload, 'DELETE');\r\n    },\r\n    cancelOpenOrders: function cancelOpenOrders(payload) {\r\n      return privCall('/api/v3/openOrders', payload, 'DELETE');\r\n    },\r\n    openOrders: function openOrders(payload) {\r\n      return privCall('/api/v3/openOrders', payload);\r\n    },\r\n    allOrders: function allOrders(payload) {\r\n      return privCall('/api/v3/allOrders', payload);\r\n    },\r\n    allOrdersOCO: function allOrdersOCO(payload) {\r\n      return privCall('/api/v3/allOrderList', payload);\r\n    },\r\n    accountInfo: function accountInfo(payload) {\r\n      return privCall('/api/v3/account', payload);\r\n    },\r\n    myTrades: function myTrades(payload) {\r\n      return privCall('/api/v3/myTrades', payload);\r\n    },\r\n    withdraw: function withdraw(payload) {\r\n      return privCall('/sapi/v1/capital/withdraw/apply', payload, 'POST');\r\n    },\r\n    withdrawHistory: function withdrawHistory(payload) {\r\n      return privCall('/sapi/v1/capital/withdraw/history', payload);\r\n    },\r\n    depositHistory: function depositHistory(payload) {\r\n      return privCall('/sapi/v1/capital/deposit/hisrec', payload);\r\n    },\r\n    depositAddress: function depositAddress(payload) {\r\n      return privCall('/sapi/v1/capital/deposit/address', payload);\r\n    },\r\n    tradeFee: function tradeFee(payload) {\r\n      return privCall('/sapi/v1/asset/tradeFee', payload);\r\n    },\r\n    assetDetail: function assetDetail(payload) {\r\n      return privCall('/sapi/v1/asset/assetDetail', payload);\r\n    },\r\n    accountSnapshot: function accountSnapshot(payload) {\r\n      return privCall('/sapi/v1/accountSnapshot', payload);\r\n    },\r\n    universalTransfer: function universalTransfer(payload) {\r\n      return privCall('/sapi/v1/asset/transfer', payload, 'POST');\r\n    },\r\n    universalTransferHistory: function universalTransferHistory(payload) {\r\n      return privCall('/sapi/v1/asset/transfer', payload);\r\n    },\r\n    dustTransfer: function dustTransfer(payload) {\r\n      return privCall('/sapi/v1/asset/dust', payload, 'POST');\r\n    },\r\n    accountCoins: function accountCoins(payload) {\r\n      return privCall('/sapi/v1/capital/config/getall', payload);\r\n    },\r\n    getBnbBurn: function getBnbBurn(payload) {\r\n      return privCall('/sapi/v1/bnbBurn', payload);\r\n    },\r\n    setBnbBurn: function setBnbBurn(payload) {\r\n      return privCall('/sapi/v1/bnbBurn', payload, 'POST');\r\n    },\r\n    capitalConfigs: function capitalConfigs() {\r\n      return privCall('/sapi/v1/capital/config/getall');\r\n    },\r\n    getDataStream: function getDataStream() {\r\n      return privCall('/api/v3/userDataStream', null, 'POST', true);\r\n    },\r\n    keepDataStream: function keepDataStream(payload) {\r\n      return privCall('/api/v3/userDataStream', payload, 'PUT', false, true);\r\n    },\r\n    closeDataStream: function closeDataStream(payload) {\r\n      return privCall('/api/v3/userDataStream', payload, 'DELETE', false, true);\r\n    },\r\n    marginGetDataStream: function marginGetDataStream() {\r\n      return privCall('/sapi/v1/userDataStream', null, 'POST', true);\r\n    },\r\n    marginKeepDataStream: function marginKeepDataStream(payload) {\r\n      return privCall('/sapi/v1/userDataStream', payload, 'PUT', false, true);\r\n    },\r\n    marginCloseDataStream: function marginCloseDataStream(payload) {\r\n      return privCall('/sapi/v1/userDataStream', payload, 'DELETE', false, true);\r\n    },\r\n    futuresGetDataStream: function futuresGetDataStream() {\r\n      return privCall('/fapi/v1/listenKey', null, 'POST', true);\r\n    },\r\n    futuresKeepDataStream: function futuresKeepDataStream(payload) {\r\n      return privCall('/fapi/v1/listenKey', payload, 'PUT', false, true);\r\n    },\r\n    futuresCloseDataStream: function futuresCloseDataStream(payload) {\r\n      return privCall('/fapi/v1/listenKey', payload, 'DELETE', false, true);\r\n    },\r\n    marginAllOrders: function marginAllOrders(payload) {\r\n      return privCall('/sapi/v1/margin/allOrders', payload);\r\n    },\r\n    marginOrder: function marginOrder(payload) {\r\n      return _order(privCall, payload, '/sapi/v1/margin/order');\r\n    },\r\n    marginGetOrder: function marginGetOrder(payload) {\r\n      return privCall('/sapi/v1/margin/order', payload);\r\n    },\r\n    marginCancelOrder: function marginCancelOrder(payload) {\r\n      return privCall('/sapi/v1/margin/order', payload, 'DELETE');\r\n    },\r\n    marginOpenOrders: function marginOpenOrders(payload) {\r\n      return privCall('/sapi/v1/margin/openOrders', payload);\r\n    },\r\n    marginAccountInfo: function marginAccountInfo(payload) {\r\n      return privCall('/sapi/v1/margin/account', payload);\r\n    },\r\n    marginMyTrades: function marginMyTrades(payload) {\r\n      return privCall('/sapi/v1/margin/myTrades', payload);\r\n    },\r\n    marginRepay: function marginRepay(payload) {\r\n      return privCall('/sapi/v1/margin/repay', payload, 'POST');\r\n    },\r\n    marginLoan: function marginLoan(payload) {\r\n      return privCall('/sapi/v1/margin/loan', payload, 'POST');\r\n    },\r\n    marginIsolatedAccount: function marginIsolatedAccount(payload) {\r\n      return privCall('/sapi/v1/margin/isolated/account', payload);\r\n    },\r\n    marginMaxBorrow: function marginMaxBorrow(payload) {\r\n      return privCall('/sapi/v1/margin/maxBorrowable', payload);\r\n    },\r\n    marginCreateIsolated: function marginCreateIsolated(payload) {\r\n      return privCall('/sapi/v1/margin/isolated/create', payload, 'POST');\r\n    },\r\n    marginIsolatedTransfer: function marginIsolatedTransfer(payload) {\r\n      return privCall('/sapi/v1/margin/isolated/transfer', payload, 'POST');\r\n    },\r\n    marginIsolatedTransferHistory: function marginIsolatedTransferHistory(payload) {\r\n      return privCall('/sapi/v1/margin/isolated/transfer', payload);\r\n    },\r\n    futuresPing: function futuresPing() {\r\n      return pubCall('/fapi/v1/ping').then(function () {\r\n        return true;\r\n      });\r\n    },\r\n    futuresTime: function futuresTime() {\r\n      return pubCall('/fapi/v1/time').then(function (r) {\r\n        return r.serverTime;\r\n      });\r\n    },\r\n    futuresExchangeInfo: function futuresExchangeInfo() {\r\n      return pubCall('/fapi/v1/exchangeInfo');\r\n    },\r\n    futuresBook: function futuresBook(payload) {\r\n      return _book(pubCall, payload, '/fapi/v1/depth');\r\n    },\r\n    futuresAggTrades: function futuresAggTrades(payload) {\r\n      return _aggTrades(pubCall, payload, '/fapi/v1/aggTrades');\r\n    },\r\n    futuresMarkPrice: function futuresMarkPrice(payload) {\r\n      return pubCall('/fapi/v1/premiumIndex', payload);\r\n    },\r\n    futuresAllForceOrders: function futuresAllForceOrders(payload) {\r\n      return pubCall('/fapi/v1/allForceOrders', payload);\r\n    },\r\n    futuresLongShortRatio: function futuresLongShortRatio(payload) {\r\n      return pubCall('/futures/data/globalLongShortAccountRatio', payload);\r\n    },\r\n    futuresCandles: function futuresCandles(payload) {\r\n      return _candles(pubCall, payload, '/fapi/v1/klines');\r\n    },\r\n    futuresTrades: function futuresTrades(payload) {\r\n      return checkParams('trades', payload, ['symbol']) && pubCall('/fapi/v1/trades', payload);\r\n    },\r\n    futuresDailyStats: function futuresDailyStats(payload) {\r\n      return pubCall('/fapi/v1/ticker/24hr', payload);\r\n    },\r\n    futuresPrices: function futuresPrices() {\r\n      return pubCall('/fapi/v1/ticker/price').then(function (r) {\r\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\r\n          return out[cur.symbol] = cur.price, out;\r\n        }, {});\r\n      });\r\n    },\r\n    futuresAllBookTickers: function futuresAllBookTickers() {\r\n      return pubCall('/fapi/v1/ticker/bookTicker').then(function (r) {\r\n        return (Array.isArray(r) ? r : [r]).reduce(function (out, cur) {\r\n          return out[cur.symbol] = cur, out;\r\n        }, {});\r\n      });\r\n    },\r\n    futuresFundingRate: function futuresFundingRate(payload) {\r\n      return checkParams('fundingRate', payload, ['symbol']) && pubCall('/fapi/v1/fundingRate', payload);\r\n    },\r\n    futuresOrder: function futuresOrder(payload) {\r\n      return _order(privCall, payload, '/fapi/v1/order');\r\n    },\r\n    futuresBatchOrders: function futuresBatchOrders(payload) {\r\n      return privCall(payload, '/fapi/v1/batchOrders');\r\n    },\r\n    futuresGetOrder: function futuresGetOrder(payload) {\r\n      return privCall('/fapi/v1/order', payload);\r\n    },\r\n    futuresCancelOrder: function futuresCancelOrder(payload) {\r\n      return privCall('/fapi/v1/order', payload, 'DELETE');\r\n    },\r\n    futuresCancelAllOpenOrders: function futuresCancelAllOpenOrders(payload) {\r\n      return privCall('/fapi/v1/allOpenOrders', payload, 'DELETE');\r\n    },\r\n    futuresOpenOrders: function futuresOpenOrders(payload) {\r\n      return privCall('/fapi/v1/openOrders', payload);\r\n    },\r\n    futuresAllOrders: function futuresAllOrders(payload) {\r\n      return privCall('/fapi/v1/allOrders', payload);\r\n    },\r\n    futuresPositionRisk: function futuresPositionRisk(payload) {\r\n      return privCall('/fapi/v2/positionRisk', payload);\r\n    },\r\n    futuresLeverageBracket: function futuresLeverageBracket(payload) {\r\n      return privCall('/fapi/v1/leverageBracket', payload);\r\n    },\r\n    futuresAccountBalance: function futuresAccountBalance(payload) {\r\n      return privCall('/fapi/v2/balance', payload);\r\n    },\r\n    futuresAccountInfo: function futuresAccountInfo(payload) {\r\n      return privCall('/fapi/v2/account', payload);\r\n    },\r\n    futuresUserTrades: function futuresUserTrades(payload) {\r\n      return privCall('/fapi/v1/userTrades', payload);\r\n    },\r\n    futuresPositionMode: function futuresPositionMode(payload) {\r\n      return privCall('/fapi/v1/positionSide/dual', payload);\r\n    },\r\n    futuresPositionModeChange: function futuresPositionModeChange(payload) {\r\n      return privCall('/fapi/v1/positionSide/dual', payload, 'POST');\r\n    },\r\n    futuresLeverage: function futuresLeverage(payload) {\r\n      return privCall('/fapi/v1/leverage', payload, 'POST');\r\n    },\r\n    futuresMarginType: function futuresMarginType(payload) {\r\n      return privCall('/fapi/v1/marginType', payload, 'POST');\r\n    },\r\n    futuresPositionMargin: function futuresPositionMargin(payload) {\r\n      return privCall('/fapi/v1/positionMargin', payload, 'POST');\r\n    },\r\n    futuresMarginHistory: function futuresMarginHistory(payload) {\r\n      return privCall('/fapi/v1/positionMargin/history', payload);\r\n    },\r\n    futuresIncome: function futuresIncome(payload) {\r\n      return privCall('/fapi/v1/income', payload);\r\n    }\r\n  };\r\n};\r\n\r\nexports.default = _default;\r\n"]},"metadata":{},"sourceType":"script"}